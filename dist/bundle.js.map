{"version":3,"file":"bundle.js","sources":["../src/thermostat.js","../src/td.js","../src/thing.js"],"sourcesContent":["\nclass Thermostat {\n\n    constructor(thing){\n        \n        this.thing = thing\n        setInterval(() => {\n            var curTemp = this.getTemperature();\n            console.log(\"current temperature is \", curTemp)\n            thing.writeProperty(\"temperature\", curTemp)\n            if (curTemp > 45) {\n                thing.emitEvent(\"overheat\")\n            }\n        }, 5000);\n\n        // init property values\n        thing.writeProperty(\"temperature\", this.getTemperature());\n\n        thing.setPropertyReadHandler(\"temperature\", function () {\n            return new Promise((resolve, reject) => {\n                resolve(this.getTemperature());\n            });\n        });\n\n        // set action handlers\n        thing.setActionHandler(\"increment\", function (value, options) {\n            this.changeTemperature(logic.getTemperature() + value)\n        });\n\n        thing.setActionHandler(\"decrement\", function (value, options) {\n            this.changeTemperature(logic.getTemperature() - value)\n        });\n    }\n\n    getTemperature() {\n        // normally, you would call the temperature sensor's function to read the actual temperature value\n        // return new Promise((resolve, reject) => {\n        return Math.random() * Math.floor(50);\n        // resolve(5); //uncomment to test incrementing etc.\n        //  });\n    }\n\n    changeTemperature(newValue) {\n        // normally, you would do physical action to change the temperature\n        //do nothing\n        this.thing.writeProperty(\"temperature\", newValue);\n        return;\n    }\n}\n\nmodule.exports = Thermostat","module.exports = {\n    title: \"TemperatureController\",\n    description: \"A Thing to control the temperature of the room and also get alerts in too high temperatures\",\n    properties: {\n        temperature: {\n            type: \"integer\",\n            description: \"Current temperature value\",\n            observable: true,\n            readOnly: true,\n            unit: \"Celsius\"\n        }\n    },\n    actions: {\n        increment: {\n            description: \"Incrementing the temperature of the room with 0 to 5 increments\",\n            input: {\n                type: \"integer\",\n                minimum: 0,\n                maximum: 5\n            }\n        },\n        decrement: {\n            description: \"Decrementing the temperature of the room with 0 to 5 increments\",\n            input: {\n                type: \"integer\",\n                minimum: 0,\n                maximum: 5\n            }\n        }\n    },\n    events: {\n        overheat: {\n            description: \"Alert sent when the room temperature is too high\"\n        }\n    }\n}","const Thermostat = require(\"./thermostat\")\nconst TDbase = require(\"./td\")\n\nWoT.produce(TDbase)\n  .then(function (thing) {\n    console.log(\"Produced \" + thing.getThingDescription().title);\n    \n    const logic = new Thermostat(thing)\n    thing.expose()\n});"],"names":["TDbase","Thermostat"],"mappings":"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"}